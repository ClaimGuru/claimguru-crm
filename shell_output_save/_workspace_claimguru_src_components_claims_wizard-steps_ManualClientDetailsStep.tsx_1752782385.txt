  const handlePhoneNumberChange = (index: number, field: 'number' | 'type', value: string) => {
    const updatedPhoneNumbers = [...clientDetails.phoneNumbers];
    
    if (field === 'number') {
      // Apply phone number formatting
      const formattedValue = formatPhoneNumber(value);
      updatedPhoneNumbers[index] = {
        ...updatedPhoneNumbers[index],
        [field]: formattedValue
      };
    } else {
      updatedPhoneNumbers[index] = {
        ...updatedPhoneNumbers[index],
        [field]: value
      };
    }
    
    // Update primary phone if this is the primary number
    const updatedDetails = {
      ...clientDetails,
      phoneNumbers: updatedPhoneNumbers,
--
  const addPhoneNumber = () => {
    const updatedDetails = {
      ...clientDetails,
      phoneNumbers: [
        ...clientDetails.phoneNumbers,
        { number: '', type: 'cell', isPrimary: false }
      ]
    };
    setClientDetails(updatedDetails);
    updateWizardData(updatedDetails);
  };

  const removePhoneNumber = (index: number) => {
    if (clientDetails.phoneNumbers.length <= 1) return; // Keep at least one phone number
    
    const phoneToRemove = clientDetails.phoneNumbers[index];
    const updatedPhoneNumbers = clientDetails.phoneNumbers.filter((_, i) => i !== index);
    
    // If we're removing the primary phone, make the first remaining one primary
    if (phoneToRemove.isPrimary && updatedPhoneNumbers.length > 0) {
      updatedPhoneNumbers[0].isPrimary = true;
--
                  onClick={addPhoneNumber}
                  className="flex items-center gap-1 px-3 py-1 text-sm bg-blue-50 text-blue-600 border border-blue-200 rounded-md hover:bg-blue-100 transition-colors"
                >
                  <Plus className="h-3 w-3" />
                  Add Phone
                </button>
              </div>
              
              {/* Phone Number List */}
              <div className="space-y-2">
                {clientDetails.phoneNumbers.map((phone, index) => (
                  <div key={index} className="flex items-center gap-2 p-3 bg-gray-50 rounded-lg">
                    {/* Primary Phone Indicator */}
                    <button
                      type="button"
                      onClick={() => setPrimaryPhone(index)}
                      className={`flex-shrink-0 p-1 rounded ${phone.isPrimary ? 'text-yellow-500' : 'text-gray-400 hover:text-yellow-500'}`}
                      title={phone.isPrimary ? 'Primary Phone' : 'Set as Primary'}
                    >
                      <Star className={`h-4 w-4 ${phone.isPrimary ? 'fill-current' : ''}`} />
                    </button>
--
                        onChange={(e) => handlePhoneNumberChange(index, 'number', e.target.value)}
                        className="w-full"
                        required={phone.isPrimary}
                      />
                    </div>
                    
                    {/* Phone Type Select */}
                    <div className="w-32">
                      <select
                        value={phone.type}
                        onChange={(e) => handlePhoneNumberChange(index, 'type', e.target.value)}
                        className="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-sm"
                      >
                        <option value="cell">Cell</option>
                        <option value="home">Home</option>
                        <option value="office">Office</option>
                        <option value="work">Work</option>
                        <option value="business">Business</option>
                        <option value="other">Other</option>
                      </select>
                    </div>
                    
                    {/* Remove Button */}
                    {clientDetails.phoneNumbers.length > 1 && (
                      <button
                        type="button"
                        onClick={() => removePhoneNumber(index)}
                        className="flex-shrink-0 p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded"
                        title="Remove Phone Number"
                      >
                        <X className="h-4 w-4" />
